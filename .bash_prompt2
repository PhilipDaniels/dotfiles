#!/bin/bash
# vim: set filetype=sh:

f_GetGitInfo()
{
    echo "Getting git info..."

    local gitsym=`git symbolic-ref HEAD`

    # if "fatal: Not a git repo .., then exit
    case "$gitsym" in
        fatal*) GitInfo[IsGitDir]=0; exit 0 ;;
        *) GitInfo[IsGitDir]=1 ;;
    esac

    # the current branch is the tail end of the symbolic reference
#   branch="${gitsym##refs/heads/}"    # get the basename after "refs/heads/"

    GitInfo[Branch]="master"
}

f_MainPrompt()
{
    # Declare an associative array to hold the things
    # that we want to work out.
    declare -A GitInfo
    GitInfo[IsGitDir]=0
    GitInfo[Branch]=""
    GitInfo[StagedCount]=0

    # Call other function to fill in the info.
    f_GetGitInfo

    # Now display it.
    #echo "${animals["moo"]}"
    for info in "${!GitInfo[@]}"; do
        echo "$info = ${GitInfo["$info"]}";
    done
}

f_MainPrompt

